Linux memo

---Linuxコミュニティとオープンソースキャリヤ---

・OSS(オープンソースソフトウェア)　デスクトップアプリケーション

オフィススイート - LibreOffice,Apache OpenOffice
Webプラウザ - Mozilla,Firefox
電子メールクライアント - Thunderbird
画像加工・編集 - GIMP(ラスター形式),Inkscape(ベクター形式)

・OSS(オープンソースソフトウェア)　サーバーアプリケーション

Webサーバー
-Apache HTTP Server(アパッチ)
-nginx(エンジンエックス)

メールサーバー
-Postfix(ポストフィックス)
-Dovecot(ダヴコット)

データベース
-MySQL
-MariaDB

ファイル共有
-NFS
-Samba

・ファイル形式・管理ツール
Red Hat系
ファイル形式 => .rpm
管理ツール「 => rpm(低),yum(高),dnf

Debian系
ファイル形式 => .deb
管理ツール => dpkg(低),apt-get(高)

・オンラインストレージ
ownCloud(オウンクラウド)
NextCloud(ネクストクラウド)

・フリーソフトウェア・オープンソースソフトウェアをまとめた呼称
- FOSS(Free/Open Source Software)
- FLOSS(Free/Libre and Open Source Software)

・オープンソースを促進する非営利団体の名称
- OSI(Open Source Initiative)

・フリーソフトウェア財団の略称
- FSF(Free Software Foundation,Inc.)

・クリエイティブ・コモンズ・ライセンス
- 意図にあった使用許可を資料車へ提示できるライセンス

・コピーレフト
- 著作物に対し複製や再配布・改変を制限しないこと

・MITライセンス
- 無償で誰でも利用可能であること
- 作者・著作権者は責任を負わないこと

・BSDライセンス
- 無保証であること、著作権とライセンスの2点を明記すること

・コピーレフト型
- ソースコードは公開
- ライセンス例 GPL(General Public License)
- ソフトウエア Linux GNU系ソフトウェア

・非コピーレフト型
- ソースコードは公開不要
- ライセンス例 BSDライセンス、MITライセンス
- ソフトウェア FreeBSD (Unix系OS)

---------
Linuxでシステムで方法を見つける
・変数
- シェル変数 変数名 = 値 
- 環境変数 export 変数名 = 値 , export シェル変数
- 共通 (削除)unset 変数名 , (確認) echo $変数名

・履歴一覧と項目実行
- history ~~ !数字

・プロンプト…コマンド入力待ちのこと

・入力したコマンドの履歴を保存するファイル
- .bash_history

・エイリアス…コマンドの別名のこと

・ファイルの場所を取得…type ファイル名

・cat(concatenate)連結する
- cat fileA (fileAの中身を出力)
- cat fileA > fileB(別ファイルに出力内容をコピー)
- cat fileA >> fileB(Aの内容をBに追記)
- cat fileA fileB(AB両方を出力)
・catコマンドのオプション
- -n(number)(行番号をつけて出力)
- -b(number-nonblank)(空白を入れずに行番号をつけて出力)
- -s(squeeze-blank)(連続した空白行を1行の空白行にまとめる)
- -E(--show-ends)(行の最後に"$"を表示させる)
- -T(--show-tabs)(タブに"^|"に置き換えて表示)

・既存の環境変数
- USER => ユーザー名
- HOME => ホームディレクトリ
- PATH => 実行可能なファイルが配置されているディレクトリ

・findコマンドの書式と指定可能なオプション
- find [起点ディレクトリ][検索式][アクション]
~ 検索式
- -name<キーワード>…ファイル名またはディレクトリ名で検索
- -mtime<日数>…最終更新日で検索
- -type<ファイル種別>…検索対象のファイル種別を指定する
- -type f:検索対象をファイルにする
- -type d:検索対象をディレクトリにする
~ アクション
- print…検索結果を改行で区切って表示(省略可能)

・locateコマンド…キーワードに関連するファイルやディレクトリを検索
- locate<キーワード>
・infoコマンド…infoマニュアルを参照

・オンラインマニュアル => usr/share/man
- man コマンド名　
・infoマニュアル => usr/share/info
-info コマンド名
・簡易版マニュアル => コマンド名 -h,-help
・説明書・ドキュメント => usr/share/doc

・lsコマンド オプション
-l => 詳細情報を表示
-a => 隠しファイルも表示
-R => 再帰的に表示
-t => 更新した順に表示
-r => 逆順表示
-h => ファイルサイズの単位を読みやすい形式で表示

・ls -lのファイル種別確認
- - => 通常ファイル
- d => ディレクトリ
- l => シンボリックリンク(ショートカット的なやつ)

・ファイル・ディレクトリを操作するコマンド
- cp(copy)
-f =>　コピー先の既存ファイルが上書きできない時、削除してからコピー
-i => コピー先を上書きする前に確認
-r, -R => ディレクトリごとコピー
-p => ファイル情報を更新しない

- mv(move):リネーム
-f => 強制的に上書き
-i => 移動先を上書きする前に確認

- touch
-d => 指定した日時に更新

-rm(remove)
-f => 確認やエラーメッセなしに削除
-i => 削除時に確認
-r,-R => ディレクトリを削除

mkdir(make a directory)
-p => 親ディレクトリも一緒に作成

rmdir(remove a directory)

・アーカイブ => 複数のファイルを一つにまとめる(書庫)
・tarコマンドオプション
-f =>アーカイブファイルの名前を指定
-v =>アーカイブ処理の詳細表示
-c =>アーカイブ作成
-x =>アーカイブ展開
-t =>アーカイブ内容表示
-z =>gz形式で圧縮・展開
-j =>bz2形式で圧縮・展開
-J =>xz形式で圧縮・展開

・圧縮・展開コマンド
gzip => gunzip => gz形式
bzip2 => bunzip2 => bz2形式
xz => unxz => xz形式
zip => unzip => zip形式

・ファイルの内容を加工して表示するコマンド
- cut =>各行から指定したフィールドを抽出
-d => タブ以外のデリミタとして使用する時
-f => フィールドを指定して出力
- sort => 行単位でファイルの内容をソート
- uniq => 連続して重複した行を1行にまとめて表示
- grep => パターンにマッチする文字列を含む行を抽出

・ファイル内容を参照するコマンド
- more => ファイル内容をページごとに表示
- less => moreコマンドの拡張
- cat => ファイルを全表示
- head => ファイルの先頭を表示
- tail => ファイルの末尾を表示
- wc => ファイルの行数、ワード数、バイト数を表示

・headやtailの行数を指定する場合は -n をつける
・more,lessのコマンドページの操作
- 1ページ進む : スペース
- 1ページ戻る : b
- 終了する : q
- 先頭へ戻る : g(lessのみ)
- 末尾へ進む : G(lessのみ)

・grepコマンドオプション
-c => マッチした行数のみ表示
-i => 大文字と小文字を区別しない
-v => マッチしなかった行を表示
-E => 拡張正規表現を使用

・sortコマンドオプション
-k => フィールドを指定して並び替え

・正規表現
. => 任意の一文字
* => 直前の文字の0回以上の繰り返し
? => 直前の文字の0回又は1回の繰り返し
[] => いずれか1文字・小文字のアルファベット1文字・以外どれか1文字
^ => 行頭
＄ => 行末
¥ => 次の1文字を通常の文字として処理

・例
.$ => 任意の1文字が末尾にある行
^. => 任意の1文字が行頭にある行
^.$ => 任意の1文字がある行
^\$ => 先頭が$文字の行

・リダイレクトを行う文字
< => 標準入力へ送る
<< => 終了文字まで標準入力を送る
> => 標準出力をファイルへ送る
>> => 標準出力をファイルへ追記
2> => 標準エラー出力の出力先を指定
2>&1 => 標準エラー出力の出力先を、標準出力の出力先と一緒にする

・ハードディスク
ハードディスクは「パーティション」と呼ばれる単位で分割して利用する
- MBR(Master Boot Record)
- GPT(GUID Partition Table)

・パーティションを作成するコマンド
- fdisk => MBR方式のみ
- gdisk,parted => MBR方式・GPT方式をサポート

- mount => 作成したパーティションをOSに認識させる
- mkfs => ファイルシステムを作成し、初期化する

・新しいHDDをLinuxで取り扱う際のステップ
1 HDDをコンピュータに接続し、デバイスファイルの存在確認
2 パーティションの作成 => fdisk,gdisk,parted
3 パーティションの初期化 => mkfs
4 ルートファイルシステムへのマウント =>mount

・MBR方式のパーティション
基本パーティション => 最大4つ(基本は3つと記憶)
拡張パーティション => 5つ以上になった時に発動
論理パーティション => 拡張からさらに分割する感じ

・ログ
syslog => デーモンやアプリのメッセージを一括管理
dmesg => カーネルのメッセージを出力
/var/log/messages => 動作された各種アプリログ
/var/log/boot.log =>　OS起動時のログ
/var/log/secure => 認証に関するログ

・プロセスコマンド
ps => システム内で稼働中の全プロセス(CPU・メモリ使用率含)
pstree => プロセスの親子関係
top => プロセスの実行状況をリアルタイム表示
free => システム全体のメモリ(未使用のメモリも)

・Linuxのディレクトリ
/home => ホームディレクトリ
/etc => システム設定ファイル

/usr => 共通して利用するプログラム・ドキュメント
/usr/bin => システム起動に必須ではない、一般用のコマンド
/usr/sbin => システム起動に必須ではない、管理用のコマンド
/usr/local => ホスト固有で使用する、プログラムや設定ファイル、ドキュメントなど
/usr/lib => /usr/bin,sbinのコマンドが使用するライブラリ
/usr/share => アーキテクチャに依存しないファイル

/bin => 一般ユーザーが使用できるコマンド群
/sbin => システム管理者用コマンド群
/lib => /bin,sbinのコマンドが使用するライブラリ
/dev => デバイスファイル
/boot => 起動に必要なファイル(Linuxカーネル格納)
/proc => 起動中のプロセスやハードウェア、システムリソースなどの情報
/sys => デバイスやドライバの情報

/var => ログファイルやメールなどの可変ファイル群
/var/cache => アプリケーションの一時ファイル
/var/log => システムやアプリケーションのログファイル

/opt => アドオン(拡張)アプリケーションなど

・ネットワークの設定と参照
ping => 疎通確認(コンピュータが起動し、ネットワーク接続できる状態にあるかを確認)
ip addr show => ネットワークインターフェースの状態確認
ip route show => ルーティングテーブルの状態確認
ss => ソケットに関する情報表示


・TCP/IPの階層構造(階層 => プロトコル => ソフトウェア)
アプリケーション層 => HTTP,SMTP,FTP,SSH,DHCP,,, => プラウザ、メーラ、アプリケーション
トランスポート層 => TCP,UDP => OS
インターネット層 => IP,ICMP,ARP => OS
ネットワークインターフェース層 => Ethernet,WiFi,,,=> デバイスドライバ

・netstat/ss => どのポートが待ち受けているか(開いているか)を確認

・DNS(Domain Name System)
=> 名前からIPアドレスを求めるシステムのこと(名前解決)

・ゾーン => 1つのDNSサーバが管理しているドメイン範囲
正引き(resolve) => 名前からIPアドレスを検索
逆引き(reverse) => IPアドレスから名前を検索

・リソースレコード
SOA(Start of Authority) => ゾーンに関する情報
NS(Name Server) => ゾーンの情報を管理するDNSサーバ名
MX(Mail Exchange) => ゾーンで管理するドメイン宛のメールサーバ
A,AAAA(Address) => 名前に対応するIPアドレス
- AはIPv4 , AAAAはIPv6用のレコード
CNAME(Canonical Name) => 名前の別名
PTR(Pointer) => IPアドレスに対応する名前

・DNS名前解決の設定と確認
/etc/resolv.conf =>理想するDNSサーバーを指定するファイル
/etc/hosts => 1行にIPアドレスとホスト名を記述して対応付する
host => DNSの正引き・逆引きが行えるコマンド
- ドメイン指定した場合は正引き、IP指定は逆引きで検索可能
nslookup => DNSの正引き・逆引きが行えるコマンド
- DNSサーバー名を指定が可能、動作確認が行える

